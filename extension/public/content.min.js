async function patchData(e,t){try{const n=await fetch(e,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error("Network response was not ok");return await n.json()}catch(e){console.error("Error:",e)}}async function getMember(e){try{const t=await fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok)throw new Error("Network response was not ok");return await t.json()}catch(e){return console.log(e),e}}window.addEventListener("start",(async e=>{const t=await chrome.storage.local.get("key");if(!t.key){const e=new CustomEvent("error",{detail:"Please upload your KEY!"});return void window.dispatchEvent(e)}const n=`https://api.socialwarlock.com/api/v1/messenger/get-member/${t.key}`,s=await getMember(n);if("success"===s.status&&s.data.member.credit>=1)chrome.runtime.sendMessage({action:"start"},(e=>{}));else{const e=new CustomEvent("credit",{detail:"Insufficient credit"});window.dispatchEvent(e)}})),window.addEventListener("pause",(async e=>{chrome.runtime.sendMessage({action:"pause"},(e=>{}))})),window.addEventListener("sendUidsEvent",(async e=>{const t=await chrome.storage.local.get("uids"),n=t.uids?t.uids:[],s=new CustomEvent("uploadedUids",{detail:n});window.dispatchEvent(s)})),window.addEventListener("sendMessagesEvent",(async e=>{const t=await chrome.storage.local.get("messages"),n=t.messages?t.messages:[],s=new CustomEvent("uploadedMessages",{detail:n});window.dispatchEvent(s)})),chrome.runtime.onMessage.addListener(((e,t,n)=>{if("warning"===e.action){const e=new CustomEvent("warning");window.dispatchEvent(e)}if("error"===e.action){const t=new CustomEvent("error",{detail:e.message});window.dispatchEvent(t)}if("ended"===e.action){const t=new CustomEvent("count",{detail:e.count});window.dispatchEvent(t)}if("checkInput"===e.action){document.querySelector('[contenteditable="true"]')&&n({status:"found"})}if("time"===e.action){let t=document.querySelector('[contenteditable="true"]');if(t){t.focus();let n=new InputEvent("input",{data:e.message,inputType:"insertText",bubbles:!0,cancelable:!0,composed:!0});t.dispatchEvent(n);const s="https://api.socialwarlock.com/api/v1/messenger/debit-member";setTimeout((async()=>{let e=new KeyboardEvent("keydown",{key:"Enter",code:"Enter",keyCode:13,which:13,bubbles:!0,cancelable:!0,composed:!0});t.dispatchEvent(e);const n=await chrome.storage.local.get("key"),o=await patchData(s,{key:n.key});if("success"===o.status){const e=new CustomEvent("credit",{detail:o.data.member.credit});window.dispatchEvent(e)}}),2e3);const o=new CustomEvent("count",{detail:e.count});window.dispatchEvent(o)}else console.log("Messenger input box not found")}})),window.addEventListener("saveUidsEvent",(function(e){chrome.storage.local.set({uids:e.detail.uids,uidsCounter:e.detail.uidsCounter,uidsLength:e.detail.uidsLength},(()=>{console.log("uids data saved"),console.log(e.detail.uids)}))})),window.addEventListener("saveKey",(function(e){chrome.storage.local.set({key:e.detail.key},(()=>{console.log("Key saved")}))})),window.addEventListener("saveMessagesEvent",(function(e){chrome.storage.local.set({messages:e.detail.messages,messagesCounter:e.detail.msgsCounter},(()=>{console.log("Messages data saved")}))}));let sidebar=document.createElement("div");sidebar.id="sidebar-root",document.body.appendChild(sidebar);let script=document.createElement("script");script.src=chrome.runtime.getURL("ui/static/js/main.ac6f0859.js"),document.body.appendChild(script);let link=document.createElement("link");link.rel="stylesheet",link.href=chrome.runtime.getURL("ui/static/css/main.a2fe89e6.css"),document.head.appendChild(link);